<% require_dependency 'gravatar' %>
<% if @vuser %>
	<div id="user">
		<div id="infobox">
			<div id="userav">
				<img src="<%= Gravatar.getAvatarURL(@vuser[:email]) %>" />
			</div>
			<div id="userinfo">
				<h3>Info</h3>
				<ul>
					<% if @vuser[:showname] %>
					<li>Name: <%= @vuser[:name]%></li>
					<% end %>
					<li>Handle: <%= @vuser[:handle]%></li>
					<% if @vuser[:showemail] %>
					<li>Email: <%= @vuser[:email]%></li>
					<% end %>
					<% if @vuser.affiliations.length > 0 %>
					<li>Affliations:</li>
					<ul>
						<% @vuser.affiliations.each do |affil| %>
							<li><%= afil.name %></li>
						<% end %>
					</ul>
					<% end %>
				</ul>
			</div>
			<div id="menubox">
				<h3>Menu</h3>
				<ul>
					<% if @vuser == session[:user] %>
					<li><%= link_to 'Edit info?', user_edit_path %></li>
					<li>Edit works?</li>
					<% else %>
					<li>Message</li>
					<% end %>
				</ul>
			</div>
		</div>
		<div id="workinfo">
			<h2>Works</h2>
			<% if @vuser.works.length == 0%>
				<em>Currently no works added</em>
			<% else %>
				<% @vuser.works.each do |work| %>
					<div class="workcontent">
						<%= work %>
					</div>
				<% end %>
			<% end %>
		</div>
	</div>
<% else %>
	<h2>Whoops!</h2>
	<p> This person doesn't exist! May I suggest you go to our unimplemented search page?</p>
<% end %>
